<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agencia de Dirección Estratégica en Costa Rica | Balanceo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #322B25;
            --color-secondary: #E4DBCA;
            --color-tertiary: #CBBFB6;
            --color-background: #EDEDEC;
            --color-text-dark: #322B25;
            --color-text-light: #EDEDEC;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { background-color: var(--color-background); color: var(--color-text-dark); font-family: var(--font-body); line-height: 1.7; overflow-x: hidden; }
        body.modal-open { overflow: hidden; }

        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        
        .main-header { padding: 20px 0; position: fixed; width: 100%; z-index: 1000; transition: background-color 0.4s ease, border-bottom 0.4s ease; }
        .main-header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: var(--font-heading); font-size: 24px; color: var(--color-text-light); font-weight: 700; transition: color 0.4s ease; text-decoration: none; }
        
        .main-nav { display: flex; align-items: center; }
        .main-nav-links { display: flex; align-items: center; }
        .main-nav-links a { color: var(--color-text-light); text-decoration: none; margin-left: 25px; font-weight: 600; transition: color 0.4s ease; }
        .main-nav-links a:hover { opacity: 0.7; }
        .cta-button { background-color: var(--color-secondary); color: var(--color-text-dark); padding: 10px 20px; border-radius: 5px; text-decoration: none; font-weight: 700; transition: all 0.4s ease; margin-left: 25px; }
        .cta-button:hover { background-color: var(--color-text-light); }
        a.btnctabg {color: var(--color-primary);}
        .hamburger-menu { display: none; cursor: pointer; z-index: 2001; }
        .hamburger-menu div { width: 25px; height: 3px; background-color: var(--color-text-light); margin: 5px 0; transition: all 0.4s ease; }

        /* --- 1. HEADER CON FONDO OSCURO AL HACER SCROLL --- */
        .main-header.header-scrolled {
            background-color: var(--color-primary); /* Fondo oscuro al hacer scroll */
            border-bottom: 1px solid rgba(237, 237, 236, 0.2);
        }
        .main-header.header-scrolled .logo,
        .main-header.header-scrolled .main-nav-links a {
            color: var(--color-text-light); /* Texto se mantiene claro */
        }
        .main-header.header-scrolled .hamburger-menu div {
             background-color: var(--color-text-light); /* Barras se mantienen claras */
        }
        .main-header.header-scrolled .cta-button {
            background-color: var(--color-secondary); /* Botón cambia a beige para contraste */
            color: var(--color-text-dark);
        }
        .main-header.header-scrolled a.btnctabg {
            color: var(--color-primary);
        } 
        .main-header.header-scrolled .cta-button:hover {
            background-color: var(--color-tertiary);
        }


        .hero { height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; padding: 80px 20px; background-color: black; }
        .hero-content { max-width: 800px; }
        .hero h1 { font-family: var(--font-heading); font-size: 4rem; color: var(--color-text-light); line-height: 1.2; margin-bottom: 20px; }
        .hero h1 span { color: var(--color-tertiary); }
        .hero p { font-size: 1.2rem; max-width: 600px; margin: 0 auto 30px; color: var(--color-tertiary); }

        .section { padding: 120px 0; }
        .section-intro { max-width: 700px; margin: 0 auto 80px; text-align: center;}
        .section-intro .label { color: var(--color-primary); opacity: 0.7; font-weight: 700; letter-spacing: 1px; margin-bottom: 15px; display: block; }
        .section-intro h2 { font-family: var(--font-heading); font-size: 3rem; color: var(--color-text-dark); margin-bottom: 20px; }
        
        .method-container { display: grid; grid-template-columns: 40px 1fr 1fr; align-items: center; gap: 50px; width: 100%; }
        .scroll-progress-container { width: 4px; height: 300px; background-color: var(--color-tertiary); border-radius: 2px; position: relative; }
        .scroll-progress-bar { width: 100%; height: 0%; background-color: var(--color-primary); border-radius: 2px; transition: height 0.1s linear; }
        .method-text-content { text-align: left; }
        .method-visuals { position: relative; }
        .method-step { background: #fff; padding: 40px; border-radius: 8px; border: 1px solid var(--color-secondary); text-align: left; }
        .method-step .step-number { font-family: var(--font-heading); font-size: 2.5rem; color: var(--color-tertiary); margin-bottom: 20px; line-height: 1; }
        .method-step h3 { font-size: 1.5rem; color: var(--color-text-dark); margin-bottom: 15px; }

        .video-thumbnail-container { margin-top: 40px; position: relative; cursor: pointer; border-radius: 8px; overflow: hidden; }
        .video-thumbnail-container img { width: 100%; display: block; transition: transform 0.4s ease; }
        .video-thumbnail-container:hover img { transform: scale(1.05); }
        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80px; height: 80px; background: rgba(50, 43, 37, 0.8); border-radius: 50%; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); transition: background 0.3s ease, transform 0.3s ease; }
        .play-icon svg { width: 30px; height: 30px; margin-left: 5px; fill: white;}
        .video-thumbnail-container:hover .play-icon { background: rgba(50, 43, 37, 1); transform: translate(-50%, -50%) scale(1.1); }
        
        #casos-de-exito { padding-top: 120px; }
        .story-grid { display: flex; justify-content: center; align-items: center; gap: 40px; flex-wrap: wrap; }
        .story-bubble { width: 150px; height: 150px; border-radius: 50%; background-size: cover; background-position: center; position: relative; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; align-items: center; justify-content: center; text-align: center; }
        .story-bubble::before { content: ''; position: absolute; top: -7px; left: -7px; right: -7px; bottom: -7px; border-radius: 50%; border: 3px solid var(--color-primary); transition: transform 0.3s ease; }
        .story-bubble:hover { transform: scale(1.1); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); }
        .story-bubble:hover::before { transform: rotate(180deg); }
        .story-bubble-title { color: #fff; font-weight: 700; z-index: 2; position: relative; background: rgba(50, 43, 37, 0.7); padding: 3px 8px; border-radius: 8px; }
        
        .why-us-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; text-align: left; }
        .why-us-item { background-color: #fff; padding: 30px; border-left: 4px solid var(--color-primary); border-radius: 0 8px 8px 0; }
        .why-us-item h3 { font-family: var(--font-heading); font-size: 1.5rem; color: var(--color-text-dark); margin-bottom: 15px; }
        .why-us-item img.emoji {width: 20px; height: 20px;}
        #marcas { background-color: #fff; padding: 80px 0; border-top: 1px solid var(--color-secondary); }
        .logo-grid { display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 40px; filter: grayscale(1%) opacity(0.9); }
        .logo-grid img { max-height: 80px; max-width: 160px; }
        #contacto { background-color: var(--color-secondary); }
        #contacto h2 { font-size: 2.5rem; }
        .final-cta-button { background-color: var(--color-primary); color: var(--color-text-light); padding: 15px 35px; border-radius: 5px; text-decoration: none; font-weight: 700; font-size: 1.1rem; transition: background-color 0.3s ease, color 0.3s ease, transform 0.3s ease; display: inline-block; }
        .final-cta-button:hover { opacity: 0.85; transform: scale(1.05); }

        .story-modal, .video-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 2000; display: none; align-items: center; justify-content: center; }
        .story-modal.active, .video-modal.active { display: flex; }
        .story-modal-content { width: 100%; height: 100%; max-width: 450px; max-height: 95%; background: #000; border-radius: 15px; position: relative; box-shadow: 0 0 50px rgba(0, 0, 0, 0.8); transform: scale(0.8); opacity: 0; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.4s ease; }
        .story-modal.active .story-modal-content { transform: scale(1); opacity: 1; }
        .story-modal-close, .video-modal-close { position: fixed; top: 20px; right: 20px; color: #fff; font-size: 35px; cursor: pointer; z-index: 2002; }
        .story-viewer { width: 100%; height: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; border-radius: 15px; }
        .story-viewer::-webkit-scrollbar { display: none; } .story-viewer { -ms-overflow-style: none; scrollbar-width: none; }
        .story-panel { height: 100%; width: 100%; position: relative; display: flex; align-items: center; justify-content: center; text-align: center; padding: 20px; scroll-snap-align: start; flex-shrink: 0; }
        .panel-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .panel-background img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.7); }
        .panel-background::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(10,10,10,0.7), rgba(10,10,10,0.1)); z-index: 2; }
        .panel-content { position: relative; z-index: 3; max-width: 90%; }
        .panel-content .label { display: block; color: var(--color-tertiary); font-weight: 700; letter-spacing: 1px; margin-bottom: 15px; font-size: 0.9rem; }
        .panel-content h2 { font-family: var(--font-heading); font-size: 2.2rem; line-height: 1.2; color: #fff; margin-bottom: 15px; }
        .panel-content p { font-size: 1rem; color: #d0d0d0; }
        .results-panel .panel-content h2 { font-size: 1.8rem; margin-bottom: 30px; }
        .stats-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
        .stat-item { border-top: 2px solid var(--color-tertiary); padding-top: 15px; }
        .stat-item .stat-number { font-family: var(--font-heading); font-size: 2.5rem; color: #fff; line-height: 1; }
        .stat-item .stat-label { font-size: 0.9rem; color: #c0c0c0; margin-top: 5px; }
        .final-cta-panel a { background-color: #fff; color: #322B25; padding: 12px 25px; border-radius: 5px; text-decoration: none; font-weight: 700; font-size: 1rem; display: inline-block; transition: all 0.3s ease; }
        .final-cta-panel a:hover { transform: scale(1.05); background-color: var(--color-tertiary); color: #322B25; }
        .video-modal-content { width: 90%; max-width: 960px; position: relative; transform: scale(0.8); opacity: 0; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.4s ease; }
        .video-modal.active .video-modal-content { transform: scale(1); opacity: 1; }
        .video-wrapper { position: relative; padding-top: 56.25%; }
        .video-wrapper video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 8px; transform: scale(1.1);}

        .main-footer { background-color: var(--color-primary); color: var(--color-tertiary); padding: 60px 0 30px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer-col h4 { font-family: var(--font-heading); color: var(--color-text-light); margin-bottom: 20px; font-size: 1.2rem; }
        .footer-col ul { list-style: none; }
        .footer-col ul li { margin-bottom: 10px; }
        .footer-col ul li, .footer-col ul li a { color: var(--color-tertiary); text-decoration: none; transition: color 0.3s ease; }
        .footer-col ul li a:hover { color: var(--color-text-light); }
        .footer-logo { font-size: 1.5rem; font-family: var(--font-heading); color: var(--color-text-light); margin-bottom: 15px; }
        .footer-copyright { text-align: center; padding-top: 30px; border-top: 1px solid rgba(237, 237, 236, 0.2); font-size: 0.9rem; }
        
        @media (min-width: 769px) { /* Estilos solo para desktop */
            .sticky-wrapper { position: relative; height: 400vh; }
            .sticky-content { position: sticky; top: 0; height: 100vh; width: 100%; overflow: hidden; display: flex; align-items: center; }
            .method-visuals { height: 400px; }
            .method-step { position: absolute; width: 100%; opacity: 0; transform: translateY(20px) scale(0.95); transition: opacity 0.6s ease-out, transform 0.6s ease-out; pointer-events: none; }
            .method-step.active { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
        }

        /* --- ESTILOS RESPONSIVE --- */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .hero p { font-size: 1rem; }
            .section-intro h2 { font-size: 2rem; }

            .main-nav-links { position: fixed; top: 0; left: -100%; width: 100%; height: 100vh; background-color: var(--color-primary); flex-direction: column; justify-content: center; align-items: center; transition: left 0.5s ease; z-index: 2000; }
            .main-nav-links.nav-active { left: 0; }
            .main-nav-links a { color: var(--color-text-light); font-size: 1.5rem; margin: 20px 0; }
            .main-nav-links .cta-button { background-color: var(--color-secondary); color: var(--color-text-dark); }
            .hamburger-menu { display: block; }
            .hamburger-menu.toggle .line1 { background-color: var(--color-text-light); transform: rotate(-45deg) translate(-5px, 6px); }
            .hamburger-menu.toggle .line2 { opacity: 0; }
            .hamburger-menu.toggle .line3 { background-color: var(--color-text-light); transform: rotate(45deg) translate(-5px, -6px); }

            #metodo { padding-top: 80px; }
            .method-container { grid-template-columns: 1fr; gap: 40px; }
            .scroll-progress-container { display: none; }
            .method-visuals { display: flex; flex-direction: column; gap: 20px; }
            .method-step { margin-bottom: 0; }

            .video-modal.active .video-modal-content { transform: scale(0.85); }
            .video-modal-content{ width: 85%; }
            .video-wrapper { padding-top: 85%; }
            .video-wrapper video{ transform: scale(1.7); }
        }
    </style>
</head>
<body>

    <header class="main-header" id="mainHeader">
        <div class="container">
            <a href="#" class="logo">Balanceo.</a>
            <nav class="main-nav" id="mainNav">
                <div class="main-nav-links" id="mainNavLinks">
                    <a href="#metodo">Método</a>
                    <a href="#casos-de-exito">Historias</a>
                    <a href="#por-que-elegirnos">Por Qué Elegirnos</a>
                    <a href="https://calendly.com/juanma-sanchez-balanceocr" class="cta-button btnctabg">Hablemos</a>
                </div>
                <div class="hamburger-menu" id="hamburgerMenu">
                    <div class="line1"></div>
                    <div class="line2"></div>
                    <div class="line3"></div>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="hero-content">
                <h1>Más que marketing, <br><span>Dirección Estratégica</span> para tu negocio.</h1>
                <p>Somos una agencia de consultoría estratégica en Costa Rica. Transformamos el potencial de tu marca en crecimiento sostenible a través de un liderazgo claro y medible.</p>
                <a href="#metodo" class="cta-button">Conoce nuestro método</a>
            </div>
        </section>

        <section id="metodo" class="sticky-wrapper">
            <div class="sticky-content">
                <div class="container method-container">
                    <div class="scroll-progress-container">
                        <div class="scroll-progress-bar" id="scrollProgressBar"></div>
                    </div>
                    <div class="method-text-content">
                        <h2>Nuestro Proceso: <br>Del Brief al Resultado</h2>
                        <p>¿Qué puedes esperar en tu primer mes? Te lo explicamos claro y directo, como nos gusta trabajar.</p>
                        <div class="video-thumbnail-container" id="videoThumbnail">
                            <img src="https://images.unsplash.com/photo-1528605248644-14dd04022da1?q=80&w=1770&auto=format&fit=crop" alt="Thumbnail del video sobre el enfoque estratégico">
                            <div class="play-icon"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
                        </div>
                    </div>
                    <div class="method-visuals">
                        <div class="method-step" data-step="1"><div class="step-number">01</div><h3>Onboarding y Brief</h3><p>Tendremos una reunión de onboarding para conocer tu marca a fondo y te enviaremos un brief detallado para alinear objetivos.</p></div>
                        <div class="method-step" data-step="2"><div class="step-number">02</div><h3>Estrategia y Creatividad</h3><p>Creamos una estrategia desde cero. Desarrollamos la creatividad y entregamos los guiones que usaremos en la producción.</p></div>
                        <div class="method-step" data-step="3"><div class="step-number">03</div><h3>Planificación y Producción</h3><p>Generamos un planning detallado para que veas todo el proceso. Una vez aprobado, empezamos la producción y enviamos materiales para tu aprobación.</p></div>
                        <div class="method-step" data-step="4"><div class="step-number">04</div><h3>Análisis y Dirección Continua</h3><p>Una vez posteado el material, empezamos a medir resultados para seguir direccionando la estrategia y optimizar el rendimiento.</p></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="casos-de-exito" class="section">
            <div class="container">
                <div class="section-intro">
                    <h2>Casos de Éxito en Crecimiento Empresarial</h2>
                    <p>Cada proyecto es una prueba de nuestro impacto. Explora cómo nuestra dirección estratégica ha generado resultados tangibles para empresas en Costa Rica y la región.</p>
                </div>
                <div class="story-grid">
                    <div class="story-bubble" style="background-image: url('https://images.unsplash.com/photo-1557804506-669a67965ba0?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400');" data-story-template-id="story-template-default">
                        <span class="story-bubble-title">Tecnología B2B</span>
                    </div>
                    <div class="story-bubble" style="background-image: url('https://images.unsplash.com/photo-1600880292210-85938c1b3f19?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400');" data-story-template-id="story-template-default">
                        <span class="story-bubble-title">Moda Sostenible</span>
                    </div>
                    <div class="story-bubble" style="background-image: url('https://images.unsplash.com/photo-1556740738-b6a63e2775df?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400');" data-story-template-id="story-template-default">
                        <span class="story-bubble-title">Fintech Startup</span>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="por-que-elegirnos" class="section">
            <div class="container">
                <div class="section-intro">
                    <span class="label">NUESTRA PROMESA</span>
                    <h2>¿Por Qué Elegir Nuestra Dirección Estratégica?</h2>
                </div>
                <div class="why-us-grid">
                    <div class="why-us-item">
                        <h3>Resultados Medibles</h3>
                        <p>Nos obsesionamos con los resultados. Nuestro compromiso es tu éxito, brindándote soluciones claras, eficientes y enfocadas en un retorno de inversión real.</p>
                    </div>
                    <div class="why-us-item">
                        <h3>Talento Internacional</h3>
                        <p>Contamos con el mejor talento de 
                            <img decoding="async" class="emoji" role="img" draggable="false" src="https://s.w.org/images/core/emoji/15.0.3/svg/1f1e8-1f1f7.svg" alt="🇨🇷">, 
                            <img decoding="async" class="emoji" role="img" draggable="false" src="https://s.w.org/images/core/emoji/15.0.3/svg/1f1e8-1f1f4.svg" alt="🇨🇴"> y 
                            <img decoding="async" class="emoji" role="img" draggable="false" src="https://s.w.org/images/core/emoji/15.0.3/svg/1f1fb-1f1ea.svg" alt="🇻🇪">, con experiencia probada en múltiples industrias y un compromiso con la excelencia en cada proyecto.</p>
                    </div>
                    <div class="why-us-item">
                        <h3>Adaptabilidad Total</h3>
                        <p>Trabajamos con empresas de todos los tamaños y sectores. Nos adaptamos a tus necesidades específicas para crear una estrategia que realmente funcione para ti.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="marcas">
            <div class="container">
                <div class="logo-grid">
                    <img src="EPM.png" alt="Logo farmacia de especialidades hospitalarias">
                    <img src="xplorers.png" alt="Logo Xplorers">
                    <img src="nutricare.png" alt="Logo Nutricare">
                    <img src="podofam.png" alt="Logo Podofam">
                    <img src="lacasa.png" alt="Logo La casa tiquicia">
                    <img src="mzc.png" alt="Logo mz constructores">
                    <img src="kcho.png" alt="Logo KC Hotel">
                    <img src="garden.png" alt="Logo Garden Bistro">
                    <img src="kukula.png" alt="Logo Kukula Cafe">
                    <img src="cressa.png" alt="Logo Cressa Cafe">
                    <img src="donfelix.png" alt="Logo Supermercado Don Felix">
                    <img src="ibiza.png" alt="Logo Ibiza">
                    <img src="terranea.png" alt="Logo Cliente 5">
                    <img src="boe.png" alt="Logo Terranea">
                    <img src="amari.png" alt="Logo Cafe Amari">
                    <img src="majo.png" alt="Logo Majo Obando Producciones">
                    <img src="pasoconofort.png" alt="Logo Passo Confort">
                    
                </div>
            </div>
        </section>

        <section id="contacto" class="section">
            <div class="container">
                 <div class="section-intro">
                    <h2>¿Listo para empezar?</h2>
                    <p>Tu éxito empieza con una conversación. En solo 2 minutos reservás tu espacio para un diagnóstico que puede transformar tu negocio.</p>
                    <a href="https://wa.link/vv2w9v" class="final-cta-button">Agendá tu Diagnóstico Gratuito</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="footer-logo">Balanceo.</div>
                    <p>Dirección estratégica para marcas que buscan un crecimiento claro y sostenible.</p>
                </div>
                <div class="footer-col">
                    <h4>Navegación</h4>
                    <ul>
                        <li><a href="#metodo">Nuestro Método</a></li>
                        <li><a href="#casos-de-exito">Historias de Éxito</a></li>
                        <li><a href="#por-que-elegirnos">Por Qué Elegirnos</a></li>
                        <li><a href="https://calendly.com/juanma-sanchez-balanceocr">Contacto</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Pilares Estratégicos</h4>
                    <ul>
                        <li>Consultoría de Negocios</li>
                        <li>Estrategia de Marca</li>
                        <li>Marketing Estratégico</li>
                        <li>Análisis de Datos</li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contacto</h4>
                    <ul>
                        <li><a href="tel:+50662649165">+506 6264 9165</a></li>
                        <li><a href="mailto:admin@balanceocr.com">admin@balanceocr.com</a></li>
                        <li>San José, Costa Rica</li>
                    </ul>
                </div>
            </div>
            <div class="footer-copyright">
                &copy; 2024 Balanceo Dirección Estratégica. Todos los derechos reservados.
            </div>
        </div>
    </footer>

    <div class="story-modal" id="storyModal">
        <div class="story-modal-close" id="storyModalClose">&times;</div>
        <div class="story-modal-content">
            <div class="story-viewer" id="storyViewer"></div>
        </div>
    </div>

    <div class="video-modal" id="videoModal">
        <div class="video-modal-close" id="videoModalClose">&times;</div>
        <div class="video-modal-content">
            <div class="video-wrapper">
                <!-- <video id="approachVideo" src="https://www.instagram.com/reel/DNErwXmMdQ3/?igsh=amlzdHhjMDkyNnJw.mp4" controls preload="none"></video> -->
                <iframe id="youtube-player" 
                        src="https://youtube.com/embed/m_wo1Pa7mDA?feature=shared" 
                        title="YouTube video player" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                </iframe>
            </div>
        </div>
    </div>

    <template id="story-template-default">
        <section class="story-panel">
            <div class="panel-background"><img src="https://images.unsplash.com/photo-1516321497487-e288fb19713f?q=80&w=1770&auto=format&fit=crop" alt="Persona trabajando en laptop"></div>
            <div class="panel-content">
                <span class="label">TECNOLOGÍA B2B EN COSTA RICA</span>
                <h2>El Reto: Generar Leads Calificados en un Mercado Saturado</h2>
                <p>Una empresa de SaaS luchaba por diferenciarse y atraer prospectos que realmente entendieran el valor de su producto. Su problema no era el marketing, era la falta de una estrategia de posicionamiento clara.</p>
            </div>
        </section>
        <section class="story-panel">
            <div class="panel-background"><img src="https://images.unsplash.com/photo-1542744095-291d1f67b221?q=80&w=1770&auto=format&fit=crop" alt="Pizarra con estrategia"></div>
            <div class="panel-content">
                <span class="label">NUESTRA DIRECCIÓN ESTRATÉGICA</span>
                <h2>Estrategia de Posicionamiento de Marca y Contenido de Valor</h2>
                <p>Desarrollamos una estrategia de "Thought Leadership", posicionando a la marca como la experta principal en su nicho a través de contenido de alto valor (webinars, whitepapers) que resolvía problemas reales de su audiencia.</p>
            </div>
        </section>
        <section class="story-panel results-panel">
            <div class="panel-background"><img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=1770&auto=format&fit=crop" alt="Gráficas de resultados"></div>
            <div class="panel-content">
                <span class="label">EL IMPACTO MEDIBLE</span>
                <h2>Aumento del ROI de Marketing y Crecimiento del Negocio</h2>
                <div class="stats-grid">
                    <div class="stat-item"><div class="stat-number">+300%</div><div class="stat-label">Aumento en Leads Calificados (MQL)</div></div>
                    <div class="stat-item"><div class="stat-number">+75%</div><div class="stat-label">Tasa de Conversión (Lead a Cliente)</div></div>
                </div>
            </div>
        </section>
        <section class="story-panel final-cta-panel">
            <div class="panel-content">
                <h2>Construyamos tu historia.</h2>
                <p style="margin-bottom: 30px;">¿Listo para que tu marca se convierta en la referencia de tu industria?</p>
                <a href="https://calendly.com/juanma-sanchez-balanceocr">Agendar llamada</a>
            </div>
        </section>
    </template>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const header = document.getElementById('mainHeader');
        const hamburger = document.getElementById('hamburgerMenu');
        const navLinks = document.getElementById('mainNavLinks');

        // Lógica para el cambio de color del Header
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) { header.classList.add('header-scrolled'); } 
            else { header.classList.remove('header-scrolled'); }
        });

        // Lógica para el Menú Hamburguesa
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('nav-active');
            hamburger.classList.toggle('toggle');
            document.body.classList.toggle('modal-open');
        });
        document.querySelectorAll('#mainNavLinks a').forEach(link => {
            link.addEventListener('click', () => {
                if (navLinks.classList.contains('nav-active')) {
                    navLinks.classList.remove('nav-active');
                    hamburger.classList.remove('toggle');
                    document.body.classList.remove('modal-open');
                }
            });
        });

        // Lógica del Sticky/Scroll del Método (SOLO PARA DESKTOP)
        if (window.innerWidth > 768) {
            const stickyWrapper = document.querySelector('.sticky-wrapper');
            const scrollProgressBar = document.getElementById('scrollProgressBar');
            if (stickyWrapper && scrollProgressBar) {
                const methodSteps = stickyWrapper.querySelectorAll('.method-step');
                const totalSteps = methodSteps.length;
                window.addEventListener('scroll', function desktopScrollHandler() {
                    const rect = stickyWrapper.getBoundingClientRect();
                    const scrollableHeight = stickyWrapper.offsetHeight - window.innerHeight;
                    if (rect.top > 0 || rect.bottom < window.innerHeight) {
                        scrollProgressBar.style.height = '0%';
                        return;
                    }
                    const progress = Math.min(1, Math.abs(rect.top) / scrollableHeight);
                    scrollProgressBar.style.height = `${progress * 100}%`;
                    let activeIndex = Math.floor(progress * totalSteps);
                    if (activeIndex >= totalSteps) { activeIndex = totalSteps - 1; }
                    methodSteps.forEach((step, index) => step.classList.toggle('active', index === activeIndex));
                });
            }
        }
        
        // Lógica de Modales
        const storyBubbles = document.querySelectorAll('.story-bubble');
        const storyModal = document.getElementById('storyModal');
        const storyViewer = document.getElementById('storyViewer');
        const storyModalClose = document.getElementById('storyModalClose');
        const videoThumbnail = document.getElementById('videoThumbnail');
        const videoModal = document.getElementById('videoModal');
        const videoModalClose = document.getElementById('videoModalClose');
        const approachVideo = document.getElementById('approachVideo');

        storyBubbles.forEach(bubble => {
            bubble.addEventListener('click', () => {
                const templateId = bubble.dataset.storyTemplateId || 'story-template-default';
                const storyTemplate = document.getElementById(templateId);
                if (storyTemplate) {
                    storyViewer.innerHTML = '';
                    const storyContent = storyTemplate.content.cloneNode(true);
                    storyViewer.appendChild(storyContent);
                    storyModal.classList.add('active');
                    document.body.classList.add('modal-open');
                    storyViewer.scrollTop = 0;
                }
            });
        });

        const closeStoryModal = () => {
            storyModal.classList.remove('active');
            if (!videoModal.classList.contains('active') && !navLinks.classList.contains('nav-active')) {
                document.body.classList.remove('modal-open');
            }
        };
        storyModalClose.addEventListener('click', closeStoryModal);
        storyModal.addEventListener('click', (e) => { if (e.target === storyModal) closeStoryModal(); });

        const openVideoModal = () => {
            videoModal.classList.add('active');
            document.body.classList.add('modal-open');
            if (approachVideo) approachVideo.play();
        };
        const closeVideoModal = () => {
            videoModal.classList.remove('active');
            if (approachVideo) { approachVideo.pause(); approachVideo.currentTime = 0; }
            if (!storyModal.classList.contains('active') && !navLinks.classList.contains('nav-active')) {
                document.body.classList.remove('modal-open');
            }
        };
        if(videoThumbnail) videoThumbnail.addEventListener('click', openVideoModal);
        if(videoModalClose) videoModalClose.addEventListener('click', closeVideoModal);
        if(videoModal) videoModal.addEventListener('click', (e) => { if (e.target === videoModal) closeVideoModal(); });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                if (storyModal.classList.contains('active')) closeStoryModal();
                if (videoModal.classList.contains('active')) closeVideoModal();
            }
        });
    });
    </script>
</body>
</html>
